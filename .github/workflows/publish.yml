on:
    release:
      types: [created]
  name: Handle Release
  jobs:
    generate:
      name: Create release-artifacts
      runs-on: ubuntu-latest
      steps:
        - name: Checkout the repository
          uses: actions/checkout@master
        - name: Generate the artifacts for amd64
          uses: skx/github-action-build@master
          with:
            builder: make release
        - name: Generate the artifacts for arm6
          uses: skx/github-action-build@master
          with:
            builder: make release-pi
        - name: Generate the artifacts for arm5
          uses: skx/github-action-build@master
          with:
            builder: make release-pi1
        - name: Upload the artifacts
          uses: skx/github-action-publish-binaries@master
          env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          with:
            args: 'example-*'
